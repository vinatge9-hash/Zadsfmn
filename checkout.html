<!doctype html>
<html lang=\"en\">
<head>
  <meta charset=\"UTF-8\" />
  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />
  <title>Niyantran Coffee - Checkout (Mock Juspay)</title>
  <script src=\"https://cdn.tailwindcss.com\"></script>
  <script>
    tailwind.config = { theme: { extend: { fontFamily: { sans: ['Inter','ui-sans-serif','system-ui'] } } } }
  </script>
</head>
<body class=\"bg-white text-slate-900\">
  <header class=\"w-full bg-white border-b border-slate-200\">
    <nav class=\"flex items-center justify-between p-4\">
      <div class=\"text-xl font-semibold\">Niyantran</div>
      <ul class=\"flex space-x-4 text-sm\">
        <li><a href=\"./index.html\" class=\"hover:underline\">Home</a></li>
        <li><a href=\"./about.html\" class=\"hover:underline\">About</a></li>
        <li><a href=\"./menu.html\" class=\"hover:underline\">Menu</a></li>
        <li><a href=\"./chart.html\" class=\"hover:underline\">Cart</a></li>
        <li><a href=\"./checkout.html\" class=\"hover:underline\">Checkout</a></li>
        <li><a href=\"./contact.html\" class=\"hover:underline\">Contact</a></li>
      </ul>
      <span id=\"cartCount\" class=\"ml-2 inline-flex items-center justify-center w-6 h-6 rounded-full bg-amber-500 text-white text-sm\">0</span>
    </nav>
  </header>
  <main class=\"w-full px-4 py-6\">
    <section class=\"w-full mb-6\">
      <h1 class=\"text-2xl font-semibold\">Checkout (Mock Juspay)
      </h1>
    </section>
    <section id=\"checkoutSummary\" class=\"w-full border rounded-lg p-4 bg-white shadow\"></section>
    <section class=\"w-full mt-4\">
      <div class=\"flex justify-end\">
        <button id=\"payBtn\" class=\"px-4 py-2 bg-emerald-500 text-white rounded\">Pay with Juspay (Mock)</button>
      </div>
      <div id=\"status\" class=\"mt-4 text-sm text-slate-700\"></div>
    </section>
  </main>
  <footer class=\"w-full bg-slate-100 text-slate-700 py-6\">
    <div class=\"text-center text-sm\">© 2025 Niyantran. All rights reserved.</div>
  </footer>
  <script>
    const cartKey = 'niyantran_cart';
    function getCart(){ try { return JSON.parse(localStorage.getItem(cartKey) || '[]'); } catch(e){ return []; } }
    function renderSummary(){ const items = getCart(); let total = 0; let html = '<h2 class=\"font-semibold mb-2\">Order Summary</h2><ul class=\"list-disc pl-5\">'; items.forEach(i => { html += `<li>${i.name} - ₹${i.price}</li>`; total += Number(i.price || 0); }); html += `</ul><p class=\"mt-2 font-semibold\">Total: ₹${total}</p>`; document.getElementById('checkoutSummary').innerHTML = html; return total; }
    function mockJuspayPay(payload){
      return new Promise((resolve)=>{
        const t = setTimeout(()=>{ resolve({success:true, transactionId:'JUSPAY-MOCK-'+Date.now(), status:'success', amount: payload.amount}); }, 1500);
      });
    }
    window.addEventListener('DOMContentLoaded', ()=>{ renderSummary(); const btn = document.getElementById('payBtn'); btn.addEventListener('click', async ()=>{
      const total = renderSummary();
      const name = 'Guest';
      const email = 'guest@example.com';
      const mockPayload = {name, email, amount: total, currency: 'INR', items: getCart()};
      const status = document.getElementById('status');
      status.textContent = 'Processing payment via Juspay (mock)...';
      try {
        const res = await mockJuspayPay(mockPayload);
        if(res && res.success){ status.innerHTML = `Payment successful. Transaction ID: ${res.transactionId}`; localStorage.removeItem(cartKey); document.getElementById('cartCount').textContent = '0'; } else { status.textContent = 'Payment failed. Please try again.'; }
      } catch(e){ status.textContent = 'Payment error. Please try again later.'; }
    });
    });
  </script>
</body>
</html>